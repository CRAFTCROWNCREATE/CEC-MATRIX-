<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>CEC-WAM | AUTO-DEPLOY</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* CORE MATRIX THEME */
        :root {
            --neon: #00FF41;
            --dark: #001100;
            --cyan: #00F3FF;
            --bg: #000000;
            --panel: rgba(0, 8, 0, 0.96);
        }

        body {
            background-color: var(--bg);
            color: var(--neon);
            font-family: 'Courier New', monospace;
            margin: 0; padding: 0;
            height: 100vh; overflow: hidden;
            user-select: none;
            -webkit-touch-callout: none;
        }

        /* MATRIX BG */
        #matrix-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; opacity: 0.5; pointer-events: none;
        }

        /* --- PREVIEW MODE WARNING (Shows if JS/Touch is blocked) --- */
        #preview-warning {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #200; z-index: 99999; display: flex;
            flex-direction: column; align-items: center; justify-content: center;
            padding: 20px; text-align: center;
        }
        .warn-box {
            border: 2px solid red; padding: 20px; background: #000; color: red;
            box-shadow: 0 0 30px red; max-width: 400px;
        }

        /* --- DEPLOYMENT SCREEN --- */
        #deploy-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 10000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .init-btn {
            padding: 20px 40px; font-size: 1.5rem; background: var(--dark);
            border: 2px solid var(--neon); color: var(--neon);
            border-radius: 10px; cursor: pointer; margin-top: 30px;
            box-shadow: 0 0 20px var(--neon); animation: pulse 2s infinite;
        }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.7; } 100% { opacity: 1; } }

        /* --- MAIN INTERFACE --- */
        #interface {
            display: none; flex-direction: column; height: 100%; position: relative;
        }

        header {
            height: 60px; display: flex; justify-content: space-between; align-items: center;
            background: rgba(0,0,0,0.9); border-bottom: 2px solid var(--neon);
            padding: 0 15px; padding-top: env(safe-area-inset-top);
        }

        /* TABS */
        .view-port { flex: 1; overflow-y: auto; padding: 15px; padding-bottom: 100px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }

        /* PANELS */
        .card {
            background: var(--panel); border: 1px solid rgba(0, 255, 65, 0.4);
            border-radius: 8px; padding: 15px; margin-bottom: 15px;
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.1);
        }
        .card-head {
            font-size: 1rem; color: var(--cyan); border-bottom: 1px solid var(--dark);
            padding-bottom: 5px; margin-bottom: 10px; font-weight: bold;
            display: flex; justify-content: space-between;
        }

        /* BUTTONS */
        .btn {
            width: 100%; padding: 15px; background: var(--dark); color: #fff;
            border: 1px solid var(--neon); font-size: 1.1rem; font-weight: bold;
            margin-top: 10px; cursor: pointer; border-radius: 5px;
            touch-action: manipulation;
        }
        .btn:active { background: var(--neon); color: #000; }

        /* NAV BAR */
        nav {
            position: fixed; bottom: 0; width: 100%; height: 80px; background: #000;
            border-top: 2px solid var(--neon); display: flex; justify-content: space-around;
            align-items: center; z-index: 100; padding-bottom: env(safe-area-inset-bottom);
        }
        .nav-btn {
            background: none; border: none; color: #555; font-size: 0.7rem;
            display: flex; flex-direction: column; align-items: center; width: 60px;
        }
        .nav-btn.active { color: var(--neon); text-shadow: 0 0 10px var(--neon); }
        .nav-btn i { font-size: 1.5rem; margin-bottom: 5px; }

        /* MODAL */
        #modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 5000; display: none;
            justify-content: center; align-items: center;
        }
        .modal-box { width: 90%; max-width: 400px; background: #111; padding: 20px; border: 1px solid var(--cyan); text-align: center; }

    </style>
</head>
<body>

    <canvas id="matrix-bg"></canvas>

    <!-- 0. PREVIEW WARNING (Only shows if JS is restricted/broken) -->
    <noscript>
        <div id="preview-warning" style="display:flex;">
            <div class="warn-box">
                <h1>⚠️ SYSTEM LOCKED</h1>
                <p>JAVASCRIPT DISABLED. OPEN IN SAFARI/CHROME.</p>
            </div>
        </div>
    </noscript>

    <!-- 1. DEPLOYMENT SCREEN -->
    <div id="deploy-screen">
        <h1 style="color: var(--neon); letter-spacing: 3px; text-shadow: 0 0 10px var(--neon);">CEC-WAM</h1>
        <div style="font-size: 0.8rem; color: #aaa; margin-bottom: 20px;">SYSTEM DEPLOYMENT PROTOCOL</div>
        
        <button class="init-btn" onclick="initialize()">INITIALIZE SYSTEM</button>
        
        <div style="margin-top: 40px; font-size: 0.7rem; color: #666; max-width: 300px; text-align: center;">
            <i class="fas fa-info-circle"></i> IF BUTTON FAILS:<br>
            Tap Share -> Open in Safari -> Add to Home Screen
        </div>
    </div>

    <!-- 2. MAIN INTERFACE -->
    <div id="interface">
        <header>
            <div><i class="fas fa-shield-alt"></i> STATUS: <b>ONLINE</b></div>
            <div id="clock">00:00</div>
        </header>

        <div class="view-port">
            
            <!-- DASHBOARD -->
            <div id="tab-dash" class="tab-content active">
                <div class="card">
                    <div class="card-head">CRITICAL METRICS</div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>LIQUID VALUE</span>
                        <span style="color: var(--neon); font-size: 1.2rem;">$1,250,039M</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>DARK ENERGY</span>
                        <span style="color: var(--cyan);">STABLE (0.999)</span>
                    </div>
                </div>

                <div class="card">
                    <div class="card-head">SYSTEM LOGS</div>
                    <div id="log-feed" style="height: 120px; overflow: hidden; font-size: 0.7rem; color: #8f8;"></div>
                </div>
            </div>

            <!-- ASSETS -->
            <div id="tab-assets" class="tab-content">
                <div class="card">
                    <div class="card-head">SECURE LEDGER</div>
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 0.8rem; color: #aaa;">AVAILABLE PSI-COIN</div>
                        <div style="font-size: 2.5rem; color: #fff; text-shadow: 0 0 10px var(--cyan);">$8,500.00</div>
                        <div style="font-size: 0.7rem; color: var(--neon); margin-top: 10px;">
                            LINKED: NAVY FEDERAL (...9008)<br>
                            ROUTING: *****4974
                        </div>
                    </div>
                    <button class="btn" onclick="confirmTransfer()">INITIATE TRANSFER</button>
                </div>
            </div>

            <!-- SYNC -->
            <div id="tab-sync" class="tab-content">
                <div class="card">
                    <div class="card-head">DATA PORT (SYNC)</div>
                    <p style="font-size: 0.8rem; color: #aaa;">Sync status between Laptop and Phone.</p>
                    <button class="btn" style="border-color: var(--cyan); color: var(--cyan);" onclick="syncData()">SYNC NOW</button>
                </div>
            </div>

        </div>

        <nav>
            <button class="nav-btn active" onclick="nav('tab-dash', this)"><i class="fas fa-home"></i>DASH</button>
            <button class="nav-btn" onclick="nav('tab-assets', this)"><i class="fas fa-university"></i>BANK</button>
            <button class="nav-btn" onclick="nav('tab-sync', this)"><i class="fas fa-sync"></i>SYNC</button>
        </nav>
    </div>

    <!-- MODAL -->
    <div id="modal-overlay">
        <div class="modal-box">
            <h3 style="color: var(--cyan);">TRANSFER STATUS</h3>
            <p id="modal-msg" style="color: #fff; margin: 20px 0;">Processing...</p>
            <button class="btn" onclick="closeModal()">CLOSE</button>
        </div>
    </div>

    <script>
        // MATRIX BG
        const c = document.getElementById('matrix-bg');
        const ctx = c.getContext('2d');
        let w, h;
        function resize() { w=c.width=window.innerWidth; h=c.height=window.innerHeight; }
        window.addEventListener('resize', resize); resize();
        const cols = Math.floor(w/20)+1;
        const ypos = Array(cols).fill(0);
        setInterval(() => {
            ctx.fillStyle = '#0001'; ctx.fillRect(0,0,w,h);
            ctx.fillStyle = '#0F0'; ctx.font = '15pt monospace';
            ypos.forEach((y,i) => {
                const t = String.fromCharCode(0x30A0 + Math.random()*96);
                ctx.fillText(t, i*20, y);
                ypos[i] = (y > 100+Math.random()*10000) ? 0 : y+20;
            });
        }, 50);

        // INIT
        function initialize() {
            // Force hide deploy screen
            document.getElementById('deploy-screen').style.display = 'none';
            document.getElementById('interface').style.display = 'flex';
            
            // Start clock and logs
            setInterval(() => document.getElementById('clock').innerText = new Date().toLocaleTimeString(), 1000);
            startLogs();
            
            // Check LocalStorage
            if(!localStorage.getItem('cec_setup')) {
                localStorage.setItem('cec_setup', 'true');
                alert("SYSTEM INSTALLED. WELCOME SOVEREIGN.");
            }
        }

        // NAV
        function nav(id, btn) {
            document.querySelectorAll('.tab-content').forEach(e => e.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(e => e.classList.remove('active'));
            btn.classList.add('active');
        }

        // LOGS
        const logs = document.getElementById('log-feed');
        const msgs = ["ENCRYPTING...", "SYNCING TIMELINE...", "CHECKING INTEGRITY...", "CORE ACCESS GRANTED", "SCANNING SECTOR 7G"];
        function startLogs() {
            setInterval(() => {
                const div = document.createElement('div');
                div.innerText = `> ${msgs[Math.floor(Math.random()*msgs.length)]}`;
                logs.prepend(div);
                if(logs.children.length > 6) logs.removeChild(logs.lastChild);
            }, 1500);
        }

        // BANKING
        function confirmTransfer() {
            if(confirm("AUTHORIZE TRANSFER: $8,500.00\nTO: NAVY FEDERAL ...9008")) {
                showModal("TRANSFER INITIATED.\n\nFUNDS QUEUED FOR ACH.\nETA: 24 HOURS.");
            }
        }

        // SYNC
        function syncData() {
            showModal("SYNCING WITH LOCAL CLOUD...\n\nDATA MATCHED.\nDEVICES PAIRED.");
        }

        // MODAL UTILS
        function showModal(msg) {
            document.getElementById('modal-msg').innerText = msg;
            document.getElementById('modal-overlay').style.display = 'flex';
        }
        function closeModal() { document.getElementById('modal-overlay').style.display = 'none'; }

        // AUTO-START CHECK (If added to home screen, it might auto-run)
        if (window.navigator.standalone === true) {
            initialize();
        }

    </script>
</body>
</html>

