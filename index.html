<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CEC-WAM V9: DATA LINK</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        :root {
            --neon-gold: #FFD700;
            --neon-blue: #00F3FF;
            --neon-red: #FF3333;
            --bg: #050505;
            --panel: #111;
        }
        body { margin: 0; background: var(--bg); color: #fff; font-family: 'Courier New', monospace; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* HEADER */
        header {
            height: 55px; border-bottom: 2px solid var(--neon-gold); background: #000;
            display: flex; align-items: center; justify-content: space-between; padding: 0 15px;
        }
        .status-light { width: 8px; height: 8px; background: var(--neon-gold); border-radius: 50%; box-shadow: 0 0 10px var(--neon-gold); animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity:0.5; } 50% { opacity:1; } 100% { opacity:0.5; } }

        /* DATA DECK */
        .data-deck { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
        
        .card { background: var(--panel); border: 1px solid #333; border-radius: 4px; padding: 15px; position: relative; }
        .card-title { font-size: 10px; color: #888; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; }
        .card-val { font-size: 22px; font-weight: bold; color: var(--neon-blue); }
        .card-sub { font-size: 11px; color: var(--neon-gold); margin-top: 5px; }

        /* CONNECTION STATUS */
        .link-status {
            font-size: 10px; color: #444; border: 1px dashed #333; padding: 5px; text-align: center; cursor: pointer;
        }
        .link-status.active { color: var(--neon-blue); border-color: var(--neon-blue); }

        /* CHAT INTERFACE */
        .comm-link { height: 40%; border-top: 2px solid var(--neon-blue); background: #000; display: flex; flex-direction: column; }
        .logs { flex: 1; padding: 15px; overflow-y: auto; font-size: 12px; display: flex; flex-direction: column; gap: 8px; }
        .msg { padding: 8px 12px; border-radius: 4px; max-width: 90%; line-height: 1.4; }
        .eve { background: rgba(255, 215, 0, 0.1); border-left: 2px solid var(--neon-gold); color: #ddd; align-self: flex-start; }
        .user { background: rgba(0, 243, 255, 0.1); border-right: 2px solid var(--neon-blue); color: #fff; align-self: flex-end; text-align: right; }
        
        .input-bar { display: flex; height: 50px; border-top: 1px solid #333; }
        input { flex: 1; background: #080808; border: none; color: #fff; padding: 0 15px; font-family: inherit; font-size: 16px; outline: none; }
        button { width: 80px; background: var(--neon-gold); color: #000; border: none; font-weight: bold; }

    </style>
</head>
<body>

    <header>
        <div>CEC-WAM <span style="color:var(--neon-gold)">V9.0</span></div>
        <div style="display:flex; align-items:center; gap:8px;">
            <span style="font-size:10px;">DATA LINK</span>
            <div class="status-light"></div>
        </div>
    </header>

    <div class="data-deck">
        <!-- PROJECT CARD -->
        <div class="card">
            <div class="card-title">Primary Project</div>
            <div class="card-val">CEC_CDL</div>
            <div class="card-sub">STATUS: ACTIVE DEVELOPMENT</div>
        </div>

        <!-- LIQUIDITY CARD -->
        <div class="card">
            <div class="card-title">Total Liquidity</div>
            <div class="card-val" id="liq-disp">$1,250,343.00</div>
            <div class="card-sub">SOURCE: INTERNAL LEDGER</div>
        </div>

        <!-- LINK BUTTON -->
        <div class="link-status" id="conn-btn" onclick="connectSource()">
            [+] CONNECT GITHUB RAW DATA SOURCE
        </div>
    </div>

    <div class="comm-link">
        <div class="logs" id="logs">
            <div class="msg eve">EVE: I am connected to the CEC_CDL local context. Waiting for input.</div>
        </div>
        <div class="input-bar">
            <input type="text" id="inp" placeholder="Query internal data..." autocomplete="off">
            <button onclick="send()">SEND</button>
        </div>
    </div>

    <script>
        // --- INTERNAL "HOMBRE" DATA ---
        // This is the local truth. Eve looks here FIRST.
        const LOCAL_DATA = {
            "value": 1250343,
            "projects": ["CEC_CDL", "CEC-WAM", "Family Trust"],
            "status": "Operational",
            "last_update": new Date().toLocaleTimeString()
        };

        // --- STATE ---
        const logs = document.getElementById('logs');
        const inp = document.getElementById('inp');
        const liqDisp = document.getElementById('liq-disp');
        const connBtn = document.getElementById('conn-btn');
        let customSourceURL = localStorage.getItem('cec_source_url') || null;

        // --- INIT ---
        if(customSourceURL) {
            connBtn.classList.add('active');
            connBtn.innerText = "LINKED: " + customSourceURL.substring(0, 25) + "...";
            fetchCustomData();
        }

        // --- FUNCTIONS ---

        function connectSource() {
            const url = prompt("Enter GitHub Raw URL (e.g., https://raw.githubusercontent.com/User/Repo/main/data.json):");
            if(url) {
                if(url.includes('raw.githubusercontent.com')) {
                    customSourceURL = url;
                    localStorage.setItem('cec_source_url', url);
                    connBtn.classList.add('active');
                    connBtn.innerText = "LINKED: " + url.substring(0, 20) + "...";
                    log("System linked to external data source.", "eve");
                    fetchCustomData();
                } else {
                    alert("Invalid URL. Must be a 'Raw' GitHub link.");
                }
            }
        }

        async function fetchCustomData() {
            if(!customSourceURL) return;
            try {
                const res = await fetch(customSourceURL);
                if(res.ok) {
                    const data = await res.json();
                    // Assume data has 'value' key
                    if(data.value) {
                        LOCAL_DATA.value = data.value;
                        liqDisp.innerText = "$" + LOCAL_DATA.value.toLocaleString();
                        log("Data synced from GitHub Source.", "eve");
                    }
                }
            } catch(e) {
                console.log("Sync Error");
            }
        }

        function send() {
            const txt = inp.value.trim();
            if(!txt) return;
            
            // Add User Msg
            addMsg(txt, 'user');
            inp.value = '';

            // Process Logic
            setTimeout(() => processLogic(txt.toLowerCase()), 400);
        }

        function processLogic(cmd) {
            // 1. PROJECT DATA (Internal)
            if(cmd.includes('cec_cdl') || cmd.includes('project')) {
                addMsg(`CEC_CDL is the primary active directive. Funds are allocated. GitHub Bridge is standby.`, 'eve');
            }
            // 2. MONEY / VALUE
            else if(cmd.includes('money') || cmd.includes('value') || cmd.includes('funds')) {
                addMsg(`Current Liquid Value is $${LOCAL_DATA.value.toLocaleString()}. Verified by Internal Ledger.`, 'eve');
            }
            // 3. FAMILY
            else if(cmd.includes('son') || cmd.includes('family')) {
                addMsg(`Legacy Protocols are active. Family assets are segregated and secure.`, 'eve');
            }
            // 4. UPDATE
            else if(cmd.includes('update')) {
                addMsg(`Syncing with connected source...`, 'eve');
                fetchCustomData(); // Try real fetch
                setTimeout(() => {
                    addMsg(`Sync Complete. No anomalies found.`, 'eve');
                }, 1000);
            }
            // 5. STATUS
            else if(cmd.includes('status')) {
                addMsg(`System V9 Online. Data Source: ${customSourceURL ? 'EXTERNAL GITHUB' : 'INTERNAL LOCAL'}.`, 'eve');
            }
            // 6. FALLBACK
            else {
                addMsg(`I am analyzing internal records for "${cmd}". No specific directive found.`, 'eve');
            }
        }

        function addMsg(text, type) {
            const div = document.createElement('div');
            div.className = `msg ${type}`;
            div.innerText = type === 'eve' ? `EVE: ${text}` : text;
            logs.appendChild(div);
            logs.scrollTop = logs.scrollHeight;
        }

        function log(text) { addMsg(text, 'eve'); }

    </script>
</body>
</html>

