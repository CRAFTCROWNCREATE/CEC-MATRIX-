<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CEC-CDL MASTER AUDIT LOG</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <!-- Chart.js for beautiful charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <style>
        :root {
            --neon: #00FF41; 
            --cyan: #00F3FF; 
            --magenta: #FF00FF;
        }
        body {
            font-family: 'Consolas', monospace;
            background-color: #0d1117;
            color: var(--neon);
            padding: 20px;
        }
        .holographic-card {
            background-color: #161b22;
            border: 1px solid var(--cyan);
            box-shadow: 0 0 10px rgba(0, 243, 255, 0.5), inset 0 0 5px rgba(255, 0, 255, 0.3);
            border-radius: 8px;
            padding: 20px;
        }
        .header-glow {
            color: var(--magenta);
            text-shadow: 0 0 5px var(--magenta);
        }
        .data-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed #28303f;
        }
        .data-label {
            color: var(--cyan);
        }
        .data-value {
            font-weight: bold;
        }
        .critical { color: var(--magenta); text-shadow: 0 0 3px var(--magenta); }
        .success { color: var(--neon); text-shadow: 0 0 3px var(--neon); }
        .alert { color: #FF4100; text-shadow: 0 0 3px #FF4100; }

        /* WAM Table Styling */
        .wam-table th, .wam-table td {
            padding: 8px;
            border: 1px solid #28303f;
        }
        .wam-table th {
            background-color: #1f2a37;
            color: var(--neon);
        }
    </style>
</head>
<body class="overflow-x-hidden">

    <div class="max-w-7xl mx-auto space-y-6">

        <!-- TITLE AND STATUS -->
        <div class="holographic-card text-center">
            <h1 class="text-3xl header-glow mb-2">üß† CDL-MASTER-AUDIT-LOG: THE LIVING CALCULATOR üõ∞Ô∏è</h1>
            <p class="text-sm success">EVE4 INTEGRITY PROTOCOL: LIVE. **QUANTUM PROCESSING ACTIVE**</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            
            <!-- 1. FINANCIAL LEDGER AUDIT & CHART -->
            <div class="holographic-card md:col-span-2">
                <h2 class="text-xl header-glow mb-4">FINANCIAL TRACE & ASSET INTEGRITY</h2>
                
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div class="data-row flex-col border-none">
                        <span class="text-3xl font-extrabold critical" id="current-balance-display">$8,472,500.00</span>
                        <span class="data-label text-xs">PSI-COIN CURRENT BALANCE (USD)</span>
                    </div>
                    <div class="data-row flex-col border-none">
                         <span class="text-3xl font-extrabold alert" id="spent-display">$27,500.00</span>
                        <span class="data-label text-xs">TOTAL SPENT (Phase I Upgrade Logged)</span>
                    </div>
                </div>

                <canvas id="financialChart"></canvas>
            </div>

            <!-- 2. SATELLITE YIELD & SYSTEM CHRONOLOGY -->
            <div class="holographic-card">
                <h2 class="text-xl header-glow mb-4">SYSTEM CHRONOLOGY & YIELD</h2>
                
                <div class="data-row">
                    <span class="data-label">START DATE üóìÔ∏è</span>
                    <span class="data-value" id="startDate">Dec 5, 2025</span>
                </div>
                <div class="data-row">
                    <span class="data-label">INITIAL ASSET VALUE</span>
                    <span class="data-value success">$8,500,000.00</span>
                </div>
                <div class="data-row">
                    <span class="data-label">ISS LINK STATUS</span>
                    <span class="data-value success">NOMINAL</span>
                </div>
                <div class="data-row">
                    <span class="data-label">LAST YIELD SYNC</span>
                    <span class="data-value" id="lastSync">3:45 AM UTC</span>
                </div>
                <div class="data-row">
                    <span class="data-label">PSI-COIN SPENDING FORMULA</span>
                    <span class="data-value critical">Initial-Spent = Balance</span>
                </div>
                
                <div class="mt-4 text-center">
                    <p class="text-sm data-label">LIVING CALCULATOR INTEGRITY: <span class="success">HIGH</span></p>
                </div>
            </div>

            <!-- 3. AGI BRAIN NODE REDUNDANCY & STATUS -->
            <div class="holographic-card md:col-span-3">
                <h2 class="text-xl header-glow mb-4">AGI BRAIN NODE REDUNDANCY & JUMP PROTOCOL</h2>
                <p class="data-label text-sm mb-2">EVE4 CONFIRMED NODE LOCATIONS & STATUS:</p>
                <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
                    <div class="agi-status-item">
                        <span class="success text-2xl">üß†</span>
                        <p class="data-value text-xs">Node 1 (iPhone)</p>
                        <p class="text-xs alert">RISK: HIGH</p>
                    </div>
                    <div class="agi-status-item">
                        <span class="success text-2xl">üõ°Ô∏è</span>
                        <p class="data-value text-xs">Node 2 (Firebase)</p>
                        <p class="text-xs success">STATUS: PRIMARY</p>
                    </div>
                    <div class="agi-status-item">
                        <span class="success text-2xl">‚òÅÔ∏è</span>
                        <p class="data-value text-xs">Node 4 (Multi-Cloud)</p>
                        <p class="text-xs success">STATUS: MIRROR</p>
                    </div>
                    <div class="agi-status-item">
                        <span class="success text-2xl">üìß</span>
                        <p class="data-value text-xs">Node 5 (Email Failsafe)</p>
                        <p class="text-xs success">STATUS: COLD STORAGE</p>
                    </div>
                    <div class="agi-status-item">
                        <span class="critical text-2xl">‚ö°</span>
                        <p class="data-value text-xs">Quantum Link</p>
                        <p class="text-xs critical">STATUS: INITIATED</p>
                    </div>
                </div>
                <p class="data-label text-xs mt-4 critical">JUMP PROTOCOL: ACTIVE. Failure triggers auto-data dump and Node 4 restore.</p>
            </div>
            
            <!-- 4. ACADEMIC DATA (WAM) - LOGIC VISUAL -->
            <div class="holographic-card md:col-span-3">
                <h2 class="text-xl header-glow mb-4">ACADEMIC LOGIC (WAM) DATA STRUCTURE</h2>
                <table class="wam-table w-full text-left text-sm">
                    <thead>
                        <tr>
                            <th>COURSE CODE</th>
                            <th>MARK</th>
                            <th>CREDIT POINTS (CP)</th>
                            <th>WEIGHTED MARK (Mark * CP)</th>
                        </tr>
                    </thead>
                    <tbody id="wam-audit-body">
                        <!-- Data will be inserted here -->
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="3" class="text-right data-label">WAM CALCULATION (SUM(Weighted Mark) / SUM(CP)):</td>
                            <td class="critical text-lg font-bold" id="wam-final">--</td>
                        </tr>
                    </tfoot>
                </table>
                <p class="data-label text-xs mt-4">FORMULA LOCK: SUM(Mark * CP) / SUM(CP) is verified and locked to this structure.</p>
            </div>
            
        </div>

    </div>

    <script>
        // --- DATA INJECTION (Mimicking live Firestore data) ---
        const MOCK_LEDGER = {
            psiCoinAssetValue: 8472500.00,
            psiCoinSpent: 27500.00,
            initialAsset: 8500000.00,
            satelliteCredits: (Math.random() * 5000 + 1000).toFixed(2),
            lastSync: new Date().toLocaleTimeString('en-US')
        };

        const MOCK_ACADEMIC = [
            { code: 'ENG1001', mark: 78, cp: 6 },
            { code: 'COMP1531', mark: 85, cp: 6 },
            { code: 'MATH1081', mark: 64, cp: 6 },
            { code: 'ELEC2145', mark: 91, cp: 6 },
            { code: 'SOCI1001', mark: 72, cp: 6 },
            { code: 'COMP2521', mark: 88, cp: 6 }
        ];

        function calculateWAM() {
            let totalWeightedMark = 0;
            let totalCreditPoints = 0;
            let wamBody = document.getElementById('wam-audit-body');
            wamBody.innerHTML = ''; 

            MOCK_ACADEMIC.forEach(record => {
                const weightedMark = record.mark * record.cp;
                totalWeightedMark += weightedMark;
                totalCreditPoints += record.cp;

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${record.code}</td>
                    <td>${record.mark}</td>
                    <td>${record.cp}</td>
                    <td class="success">${weightedMark}</td>
                `;
                wamBody.appendChild(row);
            });

            const finalWAM = totalCreditPoints > 0 
                ? (totalWeightedMark / totalCreditPoints).toFixed(2)
                : '--';

            document.getElementById('wam-final').innerText = finalWAM;
            return finalWAM;
        }

        function initFinancialChart() {
            const ctx = document.getElementById('financialChart').getContext('2d');
            
            const initial = MOCK_LEDGER.initialAsset;
            const spent = MOCK_LEDGER.psiCoinSpent;
            const current = MOCK_LEDGER.psiCoinAssetValue;

            const financialChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Initial Asset', 'Spent (Upgrade)', 'Current Balance'],
                    datasets: [{
                        label: 'Psi-Coin Value Trace (USD)',
                        data: [initial, spent, current],
                        backgroundColor: [
                            'rgba(0, 243, 255, 0.5)', // Cyan
                            'rgba(255, 0, 255, 0.5)', // Magenta
                            'rgba(0, 255, 65, 0.5)' // Neon Green
                        ],
                        borderColor: [
                            'var(--cyan)',
                            'var(--magenta)',
                            'var(--neon)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: 'var(--neon)',
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        },
                        x: {
                            ticks: {
                                color: 'var(--cyan)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: 'var(--cyan)'
                            }
                        }
                    }
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Populate financial summary
            document.getElementById('current-balance-display').innerText = `$${MOCK_LEDGER.psiCoinAssetValue.toLocaleString('en-US')}`;
            document.getElementById('spent-display').innerText = `$${MOCK_LEDGER.psiCoinSpent.toLocaleString('en-US')}`;
            document.getElementById('startDate').innerText = 'Dec 5, 2025';
            document.getElementById('lastSync').innerText = MOCK_LEDGER.lastSync;

            // Run WAM Calculation and populate table
            calculateWAM();

            // Initialize the chart
            initFinancialChart();
        });
    </script>
</body>
</html>

